# Скрипт для открытия посадочной страницы

landing.js предназначен для открытия посадочной страницы в новой вкладке при клике на определенные элементы страницы. Он ограничивает количество открытий посадочной страницы, обеспечивая, что она будет открыта не более одного раза в месяц для каждого пользователя. Также предусмотрена функция очистки записей в 'localStorage' раз в два месяца.

## Функциональность

- **Открытие посадочной страницы**: Скрипт открывает URL посадочной страницы в новой вкладке при клике на элементы страницы, такие как 'body', 'img' или 'picture'.
- **Ограничение на количество открытий**: Посадочная страница будет открыта не более одного раза в месяц для каждого пользователя. Проверка будет осуществляться с помощью данных в 'localStorage'.
- **Проверка устройства**: Скрипт не будет активироваться на мобильных устройствах, чтобы не нарушать пользовательский опыт.
- **Очистка данных**: Каждые два месяца данные в 'localStorage', связанные с открытием посадочной страницы, будут автоматически очищаться для предотвращения накопления информации.
- **Обработка ошибок**: Скрипт включает обработку ошибок для случаев, когда доступ к 'localStorage' ограничен или другие ошибки могут возникнуть.

## Установка

1. Добавьте скрипт на вашу веб-страницу перед закрывающим тегом `</body>`:

    ```html
    <script src="path/to/landing-page-script.js"></script>
    ```

2. Вставьте мета-тег в секцию `<head>` вашей страницы для указания URL посадочной страницы:

    ```html
    <meta name="landing-page-url" content="https://example.com/landing-page">
    ```

    Убедитесь, что на всех страницах, где должен работать скрипт, присутствует этот мета-тег с правильным URL.

## Как работает скрипт

1. **Извлечение URL посадочной страницы**: Скрипт ищет мета-тег с атрибутом `name="landing-page-url"`, чтобы получить URL посадочной страницы.
2. **Проверка времени последнего открытия**: Для каждого пользователя будет храниться дата последнего открытия посадочной страницы в 'localStorage'. Если страница уже была открыта в текущем месяце, новая попытка открытия не будет успешной.
3. **Обработчики событий**: Скрипт будет отслеживать клики по элементам 'body', 'img' и 'picture' и, если условия проверки соблюдены, откроет посадочную страницу в новой вкладке.
4. **Очистка 'localStorage'**: Каждые два месяца скрипт очищает данные в 'localStorage', чтобы предотвратить накопление старых записей.

## Требования

- Скрипт работает только на десктопных устройствах, проверяя `navigator.userAgent` для исключения мобильных платформ.
- Он использует 'localStorage' для отслеживания времени последнего открытия посадочной страницы.
- Для работы с мета-тегами и проверки URL используется стандартный DOM API.

## Обработка ошибок

Скрипт включает блоки обработки ошибок для таких ситуаций:
- Проблемы с доступом к 'localStorage' (например, если он отключен в режиме инкогнито).
- Ошибки при извлечении URL посадочной страницы из мета-тега.
- Невозможность открыть новую вкладку из-за ограничений браузера.

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для подробностей.

