# README for Landing Page Script

## Описание
Этот скрипт предназначен для открытия определенной посадочной страницы в новой вкладке на основе классов элемента `<body>`. Он также отслеживает, была ли уже открыта данная посадочная страница, используя куки, чтобы избежать повторного открытия в течение месяца.

## Как это работает
1. **Словарь посадочных страниц**: Содержит соответствия между классами и URL посадочных страниц.
2. **Получение классов body**: Используется `document.body.classList` для получения всех классов элемента body.
3. **Проверка классов**: Цикл проходит по всем классам, проверяя, соответствует ли какой-либо из них ключам в словаре `landingPages`.
4. **Работа с куками**: 
   - Функция `getCookie` получает значение куки по имени.
   - Функция `setCookie` устанавливает куку на заданное количество дней (в данном случае 30 дней).
5. **Логика открытия URL**: Если соответствующая посадочная страница найдена и кука не установлена, открывается новая вкладка с URL. В противном случае выводится сообщение о том, что страница уже открыта.

## Способы установки

### 1. Установка через functions.php
Добавьте JavaScript-файл в вашу тему WordPress, чтобы он загружался на всех страницах вашего сайта.

```
function enqueue_landing_script() {
    wp_enqueue_script('landing-script', get_template_directory_uri() . '/js/landing.js', array(), null, true);
}
add_action('wp_enqueue_scripts', 'enqueue_landing_script');
```

### 2. Установка через Google Tag Manager (GTM)
Вы можете установить этот скрипт через GTM с использованием двух триггеров.

#### Шаги:
1. **Создайте тег**:
   - Создайте новый тег в GTM и выберите тип тега `Custom HTML` (Пользовательский HTML).
   - Вставьте ваш JavaScript-код внутри тега `<script>` в поле кода.

2. **Создайте триггер для проверки класса**:
   - Создайте триггер с типом `Page View` (Просмотр страницы) и настройте его так, чтобы он срабатывал только на страницах с классом `nbgf lp-landing1`.

3. **Создайте триггер для таймера**:
   - Создайте триггер с типом `Timer` (Таймер) с интервалом 20000 (20 секунд) и лимитом 1.

4. **Соедините триггеры с тегом**:
   - В разделе **Triggering** (Срабатывание) добавьте оба триггера: сначала триггер для проверки класса, затем триггер таймера.

Теперь ваш тег будет активироваться, когда пользователь попадает на страницу с нужным классом и через 20 секунд после этого.

