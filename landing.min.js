(()=>{const getLastVisit=()=>{const lastVisit=localStorage.getItem("landingPageLastVisit");return lastVisit?new Date(lastVisit):null};const saveLastVisit=date=>{localStorage.setItem("landingPageLastVisit",date.toISOString())};const clearLocalStorageIfNeeded=()=>{const lastClearDate=localStorage.getItem("lastStorageClearDate");const currentDate=new Date;if(!lastClearDate||currentDate-new Date(lastClearDate)>60*24*60*60*1e3){localStorage.clear();localStorage.setItem("lastStorageClearDate",currentDate.toISOString());console.log("localStorage очищен.")}};const landingPageMetaTag=document.querySelector('meta[name="landing-page-url"]');const landingPageUrl=landingPageMetaTag?.getAttribute("content");if(!landingPageUrl){console.error("Мета-тег с адресом посадочной страницы не найден или не содержит контента.");return}console.log("Адрес посадочной страницы извлечен:",landingPageUrl);if(/Mobi|Android/i.test(navigator.userAgent)){console.log("Скрипт не активируется на мобильных устройствах.");return}console.log("Скрипт активирован на десктопном устройстве.");clearLocalStorageIfNeeded();const currentDate=new Date;const lastVisitDate=getLastVisit();const isFirstVisit=!lastVisitDate;const shouldOpenLandingPage=!lastVisitDate||currentDate-lastVisitDate>=30*24*60*60*1e3;if(shouldOpenLandingPage){console.log("Проверка прошла. Скрипт ожидает клик пользователя для открытия посадочной страницы...");const eventHandler=event=>{if(event.target.closest(".site-container")||event.target.matches("img, picture")){console.log("Клик по элементу, открываем посадочную страницу...");openLandingPage();document.removeEventListener("click",eventHandler)}};document.addEventListener("click",eventHandler)}else{console.log("Посадочная страница уже была открыта в этом месяце. Никаких действий не предпринимается.")}const openLandingPage=()=>{try{window.open(landingPageUrl,"_blank");saveLastVisit(currentDate);console.log("Посадочная страница открыта. Дата визита сохранена.")}catch(error){console.error("Ошибка при открытии посадочной страницы:",error)}}})();