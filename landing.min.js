(()=>{const o=()=>{try{const o=localStorage.getItem("landingPageLastVisit");return o?new Date(o):null}catch(o){console.error("Ошибка при получении даты визита из localStorage:",o);return null}};const t=o=>{try{localStorage.setItem("landingPageLastVisit",o.toISOString())}catch(o){console.error("Ошибка при сохранении даты визита в localStorage:",o)}};const e=()=>{try{const e=localStorage.getItem("lastStorageClearDate");const o=new Date;if(!e||o-new Date(e)>60*24*60*60*1e3){localStorage.clear();localStorage.setItem("lastStorageClearDate",o.toISOString());console.log("localStorage очищен.")}}catch(o){console.error("Ошибка при работе с localStorage (очистка):",o)}};const n=document.querySelector('meta[name="landing-page-url"]');const l=n?.getAttribute("content");const c=n?.dataset.mobile==="true";if(!l){console.error("Мета-тег с адресом посадочной страницы не найден или не содержит контента.");return}try{new URL(l)}catch(o){console.error("Некорректный URL посадочной страницы:",l);return}console.log("Адрес посадочной страницы извлечен:",l);console.log("Поддержка мобильных устройств:",c);if(/Mobi|Android/i.test(navigator.userAgent)&&!c){console.log("Скрипт не активируется на мобильных устройствах (и поддержка не включена).");return}console.log("Скрипт активирован на десктопном устройстве (или поддержка мобильных устройств включена).");e();const r=new Date;const a=o();const s=!a;const g=!a||r-a>=30*24*60*60*1e3;if(g){console.log("Проверка прошла. Скрипт ожидает клик пользователя для открытия посадочной страницы...");const i=o=>{console.log("Клик!");console.log("event.target:",o.target);if(o.target.closest(".site-container")||o.target.matches("img, picture")){console.log("Клик по элементу, открываем посадочную страницу...");const e=()=>{try{console.log("Попытка открыть посадочную страницу");console.log("URL:",l);window.open(l,"_blank");t(r);console.log("Посадочная страница открыта. Дата визита сохранена.")}catch(o){console.error("Ошибка при открытии посадочной страницы:",o)}};e();document.removeEventListener("click",i)}};document.addEventListener("click",i)}else{console.log("Посадочная страница уже была открыта в этом месяце. Никаких действий не предпринимается.")}})();